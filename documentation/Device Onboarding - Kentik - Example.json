{
  "iapVersions": [
    "2023.1"
  ],
  "adapters": [
    {
      "isDependency": true,
      "name": "adapter-aws_ec2",
      "overview": "Adapter that connects to AWS.",
      "webName": "Amazon EC2",
      "repoLink": "https://gitlab.com/itentialopensource/adapters/cloud/adapter-aws_ec2",
      "version": "^0.6.9",
      "docLink": "https://docs.itential.com/opensource/docs/amazon-aws-ec2",
      "webLink": "https://www.itential.com/adapters/amazon-ec2/"
    },
    {
      "isDependency": true,
      "name": "adapter-service_now",
      "overview": "Adapter that connects to ServiceNow",
      "webName": "ServiceNow",
      "repoLink": "https://gitlab.com/itentialopensource/adapters/itsm-testing/adapter-servicenow",
      "version": "^2.6.3",
      "docLink": "https://docs.itential.com/opensource/docs/en/servicenow",
      "webLink": "https://www.itential.com/adapters/servicenow/"
    },
    {
      "isDependency": true,
      "name": "adapter-ms_teams",
      "overview": "Adapter that connects to Microsoft Teams",
      "webName": "Microsoft Teams",
      "repoLink": "https://gitlab.com/itentialopensource/adapters/notification-messaging/adapter-msteams",
      "version": "^0.13.0",
      "docLink": "https://docs.itential.com/opensource/docs/microsoft-teams",
      "webLink": "https://www.itential.com/adapters/microsoft-teams/"
    },
    {
      "isDependency": true,
      "name": "adapter-kentik_v5",
      "overview": "Adapter that connects to Kentik",
      "webName": "",
      "repoLink": "https://gitlab.com/itentialopensource/adapters/observability/adapter-kentik_v5",
      "version": "^0.1.1",
      "docLink": "",
      "webLink": ""
    },
    {
      "isDependency": true,
      "name": "adapter-netbox_v33",
      "overview": "Adapter that connects to NetBox",
      "webName": "",
      "repoLink": "https://gitlab.com/itentialopensource/adapters/inventory/adapter-netbox_v33",
      "version": "^2.0.0",
      "docLink": "https://docs.itential.com/opensource/docs/en/netbox-v33",
      "webLink": ""
    },
    {
      "isDependency": true,
      "name": "adapter-automation_gateway",
      "overview": "Adapter that connects to Itential Automation Gateway",
      "webName": "Itential Automation Gateway",
      "version": "^4.29.0-2023.1.12",
      "docLink": "",
      "webLink": "https://www.itential.com/automation-gateway/"
    }
  ],
  "workflowProjects": [
    {
      "isDependency": true,
      "repoLink": "https://gitlab.com/itentialopensource/pre-built-automations/kentik-rest",
      "name": "Kentik - REST",
      "overview": "The integration of Itential and Kentik enables network teams to build automations that can immediately respond to events and alarms generated by the Kentik observability platform. In addition, Itential also offers a package of Pre-Built Automations to implement multiple use cases with the integration. The Kentik - REST Pre-Built provides automations that help Network Engineers automate common tasks performed in the Kentik platform. This Pre-Built contains multiple automations including:\\n\\n- Create a Device in Kentik - With this automation, users can create a device for a specific site and provide the device record as output.\\n- Run Device Flow Test - With this automation, users can run a device flow test for a specific device, providing the results of the test as output.",
      "webName": "Kentik - Device Management",
      "version": "^1.0.3-2023.1.2",
      "webLink": "https://www.itential.com/automations/kentik-device-management/"
    },
    {
      "isDependency": true,
      "repoLink": "https://gitlab.com/itentialopensource/pre-built-automations/servicenow-now-platform-rest",
      "name": "ServiceNow - Now Platform - REST",
      "overview": "Project with workflows for the Now Platform from ServiceNow",
      "webName": "ServiceNow Platform Modular Automations",
      "version": "^1.0.1-2023.1.2",
      "webLink": "https://www.itential.com/automations/servicenow-platform-modular-automations/"
    },
    {
      "isDependency": true,
      "webLink": "https://www.itential.com/automations/microsoft-teams-notification/",
      "webName": "Microsoft Teams Notification",
      "overview": "This Pre-Built integrates with the Microsoft Teams Open Source Adapter to send a notification within a Microsoft Teams channel.",
      "repoLink": "https://gitlab.com/itentialopensource/pre-built-automations/microsoft-teams-notification",
      "version": "^1.0.0-2023.1.1",
      "name": "Microsoft - Teams - REST"
    }
  ],
  "externalDependencyList": [
    {
      "name": "Kentik"
    },
    {
      "name": "AWS"
    },
    {
      "name": "MS Teams"
    },
    {
      "name": "ServiceNow"
    },
    {
      "name": "NetBox"
    },
    {
      "name": "Itential Automation Gateway"
    }
  ],
  "capabilities": [
    {
      "capability": "Creates ServiceNow Change Request"
    },
    {
      "capability": "Retrieves device details from NetBox"
    },
    {
      "capability": "Sends Microsoft Teams notification before device creation attempt"
    },
    {
      "capability": "Creates device in Kentik"
    },
    {
      "capability": "Updates NetBox device details with Kentik ID"
    },
    {
      "capability": "Gets Kentik company settings for flow test"
    },
    {
      "capability": "Configures Cisco IOS device over Itential Automation Gateway for flow test"
    },
    {
      "capability": "Runs traffic flow test in Kentik"
    },
    {
      "capability": "Sends Microsoft Teams notification after device creation and flow test with links to Kentik, SerivceNow Change Request, and Itential job"
    }
  ],
  "entryPoint": {
    "name": "Device Onboarding - Kentik - Example",
    "type": "Operations Manager Automation"
  },
  "inputs": [
    {
      "name": "deviceName",
      "type": "string",
      "required": "yes",
      "description": "Cisco IOS device to onboard to Kentik",
      "exampleValue": "IOS_Device_Name"
    },
    {
      "name": "iapUrl",
      "type": "string",
      "required": "yes",
      "description": "IAP URL to use in MS Teams and ServiceNow messages",
      "exampleValue": "https://iap_dev:443"
    },
    {
      "name": "serviceNowUrl",
      "type": "string",
      "required": "yes",
      "description": "ServiceNow URL to use in MS Teams messages",
      "exampleValue": "https://servicenow_dev.com"
    },
    {
      "name": "deviceOnboardingWebhookUrl",
      "type": "string",
      "required": "yes",
      "description": "Microsoft Teams Webhook URL for notification of device onboarding event.",
      "exampleValue": "webhookURL"
    },
    {
      "name": "serviceNowAdapter",
      "type": "string",
      "required": "yes",
      "description": "ServiceNow adapter to use for the job",
      "exampleValue": "servicenow"
    },
    {
      "name": "netBoxAdapter",
      "type": "string",
      "required": "yes",
      "description": "NetBox adapter to use for the job",
      "exampleValue": "netboxv3"
    },
    {
      "name": "msTeamsAdapter",
      "type": "string",
      "required": "yes",
      "description": "Microsoft Teams adapter to use for the job",
      "exampleValue": "msteams"
    },
    {
      "name": "kentikAdapter",
      "type": "string",
      "required": "yes",
      "description": "Kentik adapter to use for the job",
      "exampleValue": "kentik"
    }
  ],
  "apiLinks": [
    {
      "title": "Kentik API Reference",
      "link": "https://kb.kentik.com/v0/Ab09.htm"
    },
    {
      "title": "Kentik Notification Channel Management Overview",
      "link": "https://kb.kentik.com/v4/Cb24.htm#Cb24-Manage_Notification_Channels"
    },
    {
      "title": "Kentik General Dimentions Overview",
      "link": "https://kb.kentik.com/v0/Ia04.htm"
    },
    {
      "title": "Microsoft Teams Creating Incoming Webhooks Overview",
      "link": "https://learn.microsoft.com/en-us/microsoftteams/platform/webhooks-and-connectors/how-to/add-incoming-webhook?tabs=dotnet"
    }
  ],
  "exampleInputsAndOutputs": [
    {
      "exampleInput": "{\n  \"formData\": {\n    \"iapUrl\": \"https://iap-dev:443\",\n    \"deviceOnboardingWebhookUrl\": \"webhookURL1\",\n    \"serviceNowUrl\": \"https://service-now-dev.com\",\n    \"deviceName\": \"ios_device\",\n    \"serviceNowAdapter\": \"ServiceNow\",\n    \"netBoxAdapter\": \"NetboxV3\",\n    \"msTeamsAdapter\": \"MS Teams\",\n    \"kentikAdapter\": \"Kentik v5\"\n  }\n}"
    }
  ],
  "queryOutput": {},
  "name": "Device Onboarding - Kentik - Example",
  "overview": "This automation example can be installed and reviewed for ideas on how to query a Cisco IOS device from NetBox that has already been onboarded to Itential Automation Gateway (IAG) and then onboards the device into Kentik. Once onboarded into Kentik, the device is configured via IAG to send flow data to Kentik. Finally, the automation validates that Kentik has received flow data from the device.\n\nIAP updates NetBox with the Kentik device ID and keeps Change Management up to date integrating with ServiceNow and MS Teams for notifications throughout the automation. If interested in fully running this automation, see `Configuring Dependencies` below for setting up required dependencies.\n\n### Configuring Dependencies\n\n#### NetBox\n\nA single Cisco IOS device needs to be set in NetBox that has a name, a site name, and local config context data. See example object with these fields provided below.\n\n```json\n{\n  \"name\": \"ATLSWITCH01\",\n  \"site\": {\n    \"name\": \"ATL HQ\"\n  },\n  \"config_context\": {\n    \"ipAddress\": \"1.2.3.4\",\n    \"sampleRate\": 1,\n    \"snmpV3Conf\": {\n      \"userName\": \"username\",\n      \"privacyProtocol\": \"AES\",\n      \"privacyPassphrase\": \"passphrase\",\n      \"authenticationProtocol\": \"SHA\",\n      \"authenticationPassphrase\": \"password\"\n    },\n    \"description\": \"IOS Device\"\n  }\n}\n```\n\n#### Microsoft Teams\n\nThis IAP automation sends formatted messages over Microsoft Teams with links to the IAP job run, a ServiceNow Change Request created for the device onboarding event, and the Kentik flow data. One Microsoft Teams channel called `Device Onboarding` is used in this automation that requires creating an Incoming Webhook.\n\nFollow the Microsoft Teams documentation linked for <a href='https://learn.microsoft.com/en-us/microsoftteams/platform/webhooks-and-connectors/how-to/add-incoming-webhook?tabs=dotnet' target='_blank'>creating Incoming Webhooks</a> for setting up the webhook for that channel.\n\n#### Itential Automation Gateway\n\nA Cisco IOS device must be onboarded to Itential Automation Gateway (IAG) as an Ansible inventory device. See example properties in JSON object below for this:\n\n```json\n{\n  \"ansible_network_os\": \"ios\",\n  \"host_key_checking\": 0,\n  \"ansible_port\": 22,\n  \"ansible_user\": \"username\",\n  \"ansible_password\": \"password\",\n  \"ansible_host\": \"10.10.10.10\",\n  \"ansible_connection\": \"network_cli\"\n}\n```\n",
  "webName": "Device Onboarding - Kentik - Example",
  "assetType": "Workflow"
}